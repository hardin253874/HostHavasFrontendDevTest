<html ng-app="app">
<head>
    <title>Host Havas Developer Test</title>
	<meta name="description" content="Host Havas Frontend Developer Test"/>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
	<link rel="stylesheet" href="assets/css/style.css" />
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.0/angular.min.js"></script>
	<script>
  angular.module('app', [])
    .controller('mainController', ['$scope',  function($scope) {
        $scope.title = 'Hello World';
	  
	    $scope.box = {element:'image',width:130, height:100,pos_x:90,pos_y:100};
		
	 
		$scope.offset = function() {
			var rec = document.getElementById('mainDrag').getBoundingClientRect(), bodyElt = document.body;
			return {
			  top: rec.top + bodyElt .scrollTop,
			  left: rec.left + bodyElt .scrollLeft
			}
		};
    }])	
	
	.directive('dragAndResize', function($document) {
	  return {
		restrict: 'A',
		link: function(scope, element, attr) {
		  var startX = 0,
		      startY = 0,
			  startH = 0,
			  startW = 0,
              x = 0,
              y = 0,
			  h = 0,
			  w = 0; 
		  var container = null; 
      
		element.css({
		  position: 'relative',
		  cursor: 'pointer'
		});
    
		element.on('mousedown', function(event) {		  
		  event.preventDefault();
		  startX = event.screenX - x;
		  startY = event.screenY - y;		  
		  $document.on('mousemove', mousemove);
		  $document.on('mouseup', mouseup); 
		  container = attr.$$element;
		  console.log(container);
		});

		function mousemove(event) {
		  y = event.screenY - startY;
		  x = event.screenX - startX;		  
		  w = 1000 - x;
		  h = 1000 - y;
		  console.log("x: " + x + " y: " + y)
		  console.log("width: " + w + " height: " + h)
		  container.css({
			top: y + 'px',
			left: x + 'px',
			width: w + 'px',
			height: h + 'px'
		  });

		}

		function mouseup() {
		  $document.unbind('mousemove', mousemove);
		  $document.unbind('mouseup', mouseup);
		}
		}
	  };
	});
	
</script>
<style>


div.box {
    border: 1px solid Black;
    width: 1000px;
    height:1000px;
}

.enter {
    background-color:#efefef;
}
#mainDrag { border:#00ffff 1px solid; width:600px; height:600px;}
</style>
</head>	
<body>
	<div id="main" ng-controller="mainController">
		{{ title}}

		 <div drag-and-resize>		
			<div class="box">
			
			</div>
		</div>
	</div>
	
</body>