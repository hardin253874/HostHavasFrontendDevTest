<html ng-app="app">
<head>
    <title>Host Havas Developer Test</title>
	<meta name="description" content="Host Havas Frontend Developer Test"/>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
	<link rel="stylesheet" href="assets/css/style.css" />
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.0/angular.min.js"></script>
	<script>
  angular.module('app', [])
    .controller('mainController', ['$scope',  function($scope) {
        $scope.title = 'Hello World';
	  
	    $scope.box = {element:'image',width:130, height:100,pos_x:90,pos_y:100};
		
		$scope.toggle = function(event){
			if (event) {
				var display = document.getElementById(event.toElement.id).style.display;
				if (display === 'None'){
					display = 'Block';
				} else {
					display = 'None';
				}
				document.getElementById(event.toElement.id).style.display = display;
				
			}
		}
	 
		$scope.offset = function() {
			var rec = document.getElementById('canvas').getBoundingClientRect(), bodyElt = document.body;
			return {
			  top: rec.top + bodyElt .scrollTop,
			  left: rec.left + bodyElt .scrollLeft
			}
		};
    }])		
	.directive('dragAndResize', function($document) {
	  return {
		restrict: 'A',
		link: function(scope, element, attr) {
		  var startX = 0,
		      startY = 0,
			  startH = 0,
			  startW = 0,
              x = 0,
              y = 0,
			  h = 0,
			  w = 0; 
		  var container = null; 
      
		element.css({
		  position: 'relative',
		  cursor: 'pointer'
		});
    
		element.on('mousedown', function(event) {		  
		  event.preventDefault();
		  startX = event.screenX - x;
		  startY = event.screenY - y;		  
		  $document.on('mousemove', mousemove);
		  $document.on('mouseup', mouseup); 
		  container = attr.$$element;
		  console.log(container);
		});

		function mousemove(event) {
		  y = event.screenY - startY;
		  x = event.screenX - startX;		 

		  var posOff = offset();
          x = x - posOff.left;
          y = y - posOff.top;
		  
		  w = 1000 - x;
		  h = 600 - y;
		  console.log("x: " + x + " y: " + y)
		  console.log("width: " + w + " height: " + h)
		  container.css({
			top: y + 'px',
			left: x + 'px',
			width: w + 'px',
			height: h + 'px'
		  });

		}
		
		function offset() {
			var rec = document.getElementById('canvas').getBoundingClientRect(), 
			    bodyElt = document.body;
			return {
			  top: rec.top + bodyElt.scrollTop,
			  left: rec.left + bodyElt.scrollLeft
			}
		}

		function mouseup() {
		  $document.unbind('mousemove', mousemove);
		  $document.unbind('mouseup', mouseup);
		}
		}
	  };
	});
	
	
</script>
<style>


div.box {
    border: 1px solid Black;
    width: 1000px;
    height:600px;	
}

#topNav {
		border: 1px solid Black;
		top: 0px;
		left:0px;
		width: 100%;
		height: 50px;
		background-color: red;
		display: block;
	}


.enter {
    background-color:#efefef;
}
#canvas { border:#00ffff 0px solid; width:1600px; height:800;}
</style>
</head>	
<body>
	<div id="main" ng-controller="mainController">
		
		<div id="canvas">
			 <div drag-and-resize>		
			<div class="box">
				<div id="topNav" ng-click="toggle($event)"></div>
			</div>
		</div>	
		</div>

	</div>
	
</body>